# GameServerProgramming

 4-1학기 게임서버프로그래밍 텀프로젝트입니다

 DB스레드를 생성하여 DB에 접근하였을 때 발생하는 오버헤드를 감소시켰습니다.

DB연결을 우선적으로 해놓고 플레이어의 위치가 갱신될때마다 PQCS함수를 통해 DB스레드에 있는 concurrency priority_queue에 삽입을 합니다.

삽입된 정보들은 DB스레드에서 저장프로시저를 호출하여 완료되면 GQCS함수에게 완료되었다는 사실을 알려 인게임 로직과 DB로직을 분산시켜 병렬성을 향상시켰습니다. 

또한 섹터를 구현하여 for문 순회시 불필요한 검색을 줄였습니다.

timer스레드와 db스레드 둘다 논블로킹 자료구조인 동시성우선순위 큐를 사용하였기 때문에 공유자원에 쓰기에 있어서 간단한 작업들은 이쪽에서 처리하여

불필요한 잠금을 없앴습니다.

![동접](https://github.com/SJKIM99/GameServerProgramming/assets/114385193/ad8aa99d-100c-40b8-8c9f-1e01d520a062)

스트레스 테스트를 진행한 결과 NPC 20만명, 플레이어 1만명 섹터범위:10 시야:5를 기준으로 최대동접 1만명일때 1만명 모두 인게임에 들어왔을 때

쾌적한 환경임을 알 수 있었습니다.
